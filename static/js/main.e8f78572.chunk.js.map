{"version":3,"sources":["withRoot.jsx","endpoints.jsx","postForm.jsx","vote.jsx","post.jsx","feed.jsx","app.jsx","index.js"],"names":["theme","createMuiTheme","typography","useNextVariants","palette","primary","light","main","dark","contrastText","secondary","withRoot","Component","props","CssBaseline","PostsBase","PostsURL","GetRequestOptions","method","redirect","PostHeaderOptions","withStyles","form","flexGrow","button","margin","spacing","textField","padding","classes","user","onSend","React","useState","text","setText","done","setDone","error","setError","hasError","handleSend","msg","headers","body","JSON","stringify","Date","now","fetch","then","response","ok","json","catch","className","TextField","id","multiline","rowsMax","fullWidth","value","onKeyPress","ev","key","preventDefault","onChange","event","target","Button","variant","disabled","onClick","color","endIcon","Typography","root","marginLeft","post","votes","flatVotes","Object","entries","map","data","undefined","foundVote","find","v","vote","setVote","votesBase","handleVote","up","url","Error","cVote","parse","time","console","log","updateVote","name","initialVote","upcolor","downcolor","IconButton","aria-label","size","box","display","Grid","item","xs","sm","lg","Paper","square","elevation","Feed","state","this","setState","prevProps","update","refresh","setData","PostTexts","i","k","onVote","container","TrompeteIcon","role","style","App","refreshFeed","AppBar","position","Toolbar","flex","ui","prevState","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.e8f78572.chunk.js","sourcesContent":["import React from 'react';\r\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n\r\n// A theme with custom primary and secondary color.\r\n// It's optional.\r\nconst theme = createMuiTheme({\r\n  typography: {\r\n    useNextVariants: true,\r\n  },\r\n  palette: {\r\n    primary: {\r\n      light: \"#99d066\",\r\n      main: \"#689f38\",\r\n      dark: \"#387002\",\r\n      contrastText: '#000'\r\n    },\r\n    secondary: {\r\n      light: \"#819ca9\",\r\n      main: \"#546e7a\",\r\n      dark: \"#29434e\",\r\n      contrastText: '#fff'\r\n    },\r\n  },\r\n});\r\n\r\nfunction withRoot(Component) {\r\n  function WithRoot(props) {\r\n    // MuiThemeProvider makes the theme available down the React tree\r\n    // thanks to React context.\r\n    return (\r\n      <MuiThemeProvider theme={theme}>\r\n        {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\r\n        <CssBaseline />\r\n        <Component {...props} />\r\n      </MuiThemeProvider>\r\n    );\r\n  }\r\n\r\n  return WithRoot;\r\n}\r\n\r\nexport default withRoot;\r\n","export const PostsBase = 'https://lagerjodel.firebaseio.com/databases/posts';\r\nexport const PostsURL = PostsBase + '.json';\r\nexport const GetRequestOptions = {\r\n  method: 'GET',\r\n  redirect: 'follow'\r\n};\r\n\r\nexport const PostHeaderOptions = {\r\n  'Content-Type': 'application/json',\r\n  'Accept': 'application/json'\r\n}\r\n","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\n\r\nimport { PostsURL, PostHeaderOptions } from './endpoints';\r\n\r\nconst styles = theme => ({\r\n  form: {\r\n    flexGrow: 1,\r\n  },\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  textField: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(2),\r\n  },\r\n});\r\n\r\nconst PostForm = (props) => {\r\n  const { classes, user, onSend } = props;\r\n  const [text, setText] = React.useState('');\r\n  const [done, setDone] = React.useState(false);\r\n  const [error, setError] = React.useState(\"Leere Trompete\");\r\n  const hasError = error !== \"\"\r\n\r\n  const wrappedOnSend = () => {\r\n    onSend();\r\n  };\r\n\r\n  const handleSend = () => {\r\n    if (hasError) return;\r\n\r\n    const msg = {\r\n      method: 'POST',\r\n      headers: PostHeaderOptions,\r\n      body: JSON.stringify({\r\n        'user': user,\r\n        'text': text,\r\n        'time': Date.now()\r\n      }),\r\n      redirect: 'follow'\r\n    };\r\n    fetch(PostsURL, msg)\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          response.json().then((json) => {\r\n            setDone(true);\r\n            wrappedOnSend();\r\n          }).catch(() => {\r\n            setError(\"Fehler beim Verarbeiten der Nachricht...\");\r\n          });\r\n        }\r\n        else {\r\n          setError(\"Mein Server mag diese Nachricht nicht...\");\r\n        }\r\n      })\r\n      // this would recover the error message\r\n      //.then( data => setError(\"sending failed...\" + data.errors[0].msg))\r\n      .catch(() => {\r\n        setError(\"Fehler beim Senden der Nachricht...\");\r\n      });\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    setText(event.target.value);\r\n    setError(event.target.value ? \"\" : \"Leere Trompete\");\r\n  };\r\n\r\n  return <form className={classes.form}>\r\n    <TextField\r\n      id=\"my-text\"\r\n      multiline\r\n      error={hasError}\r\n      className={classes.textField}\r\n      rowsMax={4}\r\n      fullWidth\r\n      value={text}\r\n      onKeyPress={(ev) => {\r\n        if (ev.key === 'Enter') {\r\n          handleSend();\r\n          ev.preventDefault();\r\n        }\r\n      }}\r\n      onChange={handleChange}\r\n    />\r\n    <Button\r\n      variant=\"contained\"\r\n      disabled={done || hasError}\r\n      onClick={handleSend}\r\n      className={classes.button}\r\n      color={done ? \"secondary\" : \"primary\"}\r\n      endIcon={done ? <DoneIcon /> : <SendIcon />}>\r\n      Send\r\n          </Button>\r\n    {done ? <Typography variant=\"body1\" color=\"primary\">Danke!</Typography> : \"\"}\r\n  </form>\r\n};\r\n\r\nexport default withStyles(styles)(PostForm);\r\n","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\n\r\nimport { PostsBase, PostHeaderOptions } from './endpoints';\r\n\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    marginLeft: 'auto',\r\n  },\r\n});\r\n\r\nconst Votes = (props) => {\r\n  const { id, post, user, classes } = props;\r\n  const { votes } = post;\r\n  const flatVotes = votes ? Object.entries(votes).map(\r\n    ([k, v]) => { return { id: k, data: v } }) : undefined;\r\n  const foundVote = flatVotes ? flatVotes.find(v => v.data.user === user) : undefined;\r\n\r\n  const [vote, setVote] = React.useState(foundVote);\r\n\r\n  const votesBase = PostsBase + '/' + id + '/votes';\r\n\r\n\r\n  const initialVote = (up) => {\r\n    const url = votesBase + '.json';\r\n    const data = {\r\n      'user': user,\r\n      'up': up,\r\n      'time': Date.now()\r\n    }\r\n    const msg = {\r\n      method: 'POST',\r\n      headers: PostHeaderOptions,\r\n      body: JSON.stringify({\r\n        'user': user,\r\n        'up': up,\r\n        'time': Date.now()\r\n      }),\r\n      redirect: 'follow'\r\n    };\r\n    fetch(url, msg)\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          response.json().then((json) => {\r\n            setVote({\r\n              data: data,\r\n              id: json.name\r\n            });\r\n          });\r\n        }\r\n        else {\r\n          throw new Error(\"Whoops!\");\r\n        }\r\n      })\r\n      .catch(() => {\r\n        console.log(\"Fehler beim Senden des Votes...\");\r\n      });\r\n  }\r\n\r\n  const updateVote = (up) => {\r\n    const url = votesBase + '/' + vote.id + '/.json';\r\n    const msg = {\r\n      method: 'PATCH',\r\n      headers: PostHeaderOptions,\r\n      body: JSON.stringify({\r\n        'up': up,\r\n        'time': Date.now()\r\n      }),\r\n      redirect: 'follow'\r\n    };\r\n    fetch(url, msg)\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          response.json().then((json) => {\r\n            // deep copy\r\n            const cVote = JSON.parse(JSON.stringify(vote))\r\n            cVote.data.up = json.up;\r\n            cVote.data.time = json.time;\r\n            setVote(cVote);\r\n          });\r\n        }\r\n        else {\r\n          throw new Error(\"Whoops!\");\r\n        }\r\n      })\r\n      .catch(() => {\r\n        console.log(\"Fehler beim Senden des Votes...\");\r\n      });\r\n  }\r\n\r\n  const handleVote = (up) => {\r\n    if (vote) {\r\n      updateVote(up);\r\n    }\r\n    else {\r\n      initialVote(up);\r\n    }\r\n  };\r\n\r\n  const handleUpVote = (event) => {\r\n    handleVote(true);\r\n  }\r\n\r\n  const handleDownVote = (event) => {\r\n    handleVote(false);\r\n  }\r\n  let upcolor = \"inherit\";\r\n  let downcolor = \"inherit\";\r\n  if (vote) {\r\n    upcolor = vote.data.up ? \"primary\" : \"inherit\";\r\n    downcolor = !vote.data.up ? \"primary\" : \"inherit\";\r\n  }\r\n\r\n  return <div className={classes.root}>\r\n    <IconButton aria-label=\"upvote\" size=\"small\" color={upcolor} onClick={handleUpVote}><ArrowUpwardIcon /></IconButton>\r\n    <IconButton aria-label=\"downvote\" size=\"small\" color={downcolor} onClick={handleDownVote}><ArrowDownwardIcon /></IconButton>\r\n  </div>\r\n};\r\n\r\nexport default withStyles(styles)(Votes);\r\n\r\n\r\n","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\n\r\nimport Vote from './vote';\r\n\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  box: {\r\n    margin: theme.spacing(2),\r\n    padding: theme.spacing(2),\r\n    display: \"flex\",\r\n  },\r\n});\r\n\r\nconst Post = (props) => {\r\n  const { id, post, user, classes } = props;\r\n  const { text } = post;\r\n\r\n  return <Grid item xs={12} sm={6} lg={4} className={classes.root}>\r\n    <Paper square elevation={2} className={classes.box}>\r\n      <Typography variant=\"h6\" color=\"inherit\">\r\n        {text}\r\n      </Typography>\r\n      <Vote post={post} id={id} user={user} />\r\n    </Paper>\r\n  </Grid>\r\n};\r\n\r\nexport default withStyles(styles)(Post);\r\n\r\n","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport Post from './post';\r\nimport { PostsURL, GetRequestOptions } from './endpoints';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n});\r\n\r\nclass Feed extends React.Component {\r\n  state = {\r\n    data: {},\r\n    error: \"\"\r\n  }\r\n\r\n  setData(data) {\r\n    this.setState({ data: data });\r\n  }\r\n\r\n  componentDidMount(prevProps) {\r\n    this.update()\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.refresh !== prevProps.refresh) {\r\n      this.update()\r\n    }\r\n  }\r\n\r\n  update() {\r\n    // const { user } = this.props;\r\n    fetch(PostsURL, GetRequestOptions).then(response => response.json())\r\n      .then(json => {\r\n        this.setData(json);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { user, classes } = this.props;\r\n    const PostTexts = Object.entries(this.state.data).map(\r\n      ([k, v], i) => {\r\n        return <Post id={k} post={v} user={user} onVote={this.handleVote} key={i} />\r\n      });\r\n\r\n    return <Grid className={classes.root} container spacing={2}>\r\n      {PostTexts}\r\n    </Grid>\r\n  }\r\n};\r\n\r\nexport default withStyles(styles)(Feed);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport withRoot from './withRoot';\r\nimport PostForm from './postForm';\r\nimport Feed from './feed';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  main: {\r\n    padding: theme.spacing(2),\r\n    margin: theme.spacing(1),\r\n  },\r\n  ui: {\r\n    padding: theme.spacing(2),\r\n    margin: theme.spacing(1),\r\n  },\r\n});\r\n\r\nconst TrompeteIcon = () => { return <span role=\"img\" aria-label=\"trompete\" style={{ margin: \"1ex\" }}>🎺</span>; };\r\n\r\nconst user = '-M8qkGNG5pSfIyxBcxPP';\r\n\r\nclass App extends Component {\r\n\r\n  state = {\r\n    refreshFeed: false\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    const handleSend = () => { this.setState(prevState => { return { refreshFeed: !prevState.refreshFeed } }); };\r\n\r\n    return <div className={classes.root}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <TrompeteIcon />\r\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.flex}>\r\n            Trompete\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Paper square elevation={4} className={classes.ui}>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12}>\r\n            <PostForm user={user} onSend={handleSend} />\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n      <Grid container spacing={2} className={classes.main}>\r\n        <Grid item xs={12}>\r\n          <Feed user={user} refresh={this.state.refreshFeed} />\r\n        </Grid>\r\n      </Grid>\r\n    </div >\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withRoot(withStyles(styles)(App));\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './app.jsx';\r\n\r\nReactDOM.render(<App />, document.querySelector('#root'));\r\n"],"sourceRoot":""}