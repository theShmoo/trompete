(this.webpackJsonptrompete=this.webpackJsonptrompete||[]).push([[0],{58:function(e,t,a){e.exports=a(67)},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),i=a.n(o),c=a(28),s=a(29),l=a(36),u=a(35),m=a(4),f=a(109),d=a(110),p=a(106),h=a(108),v=a(69),b=a(52),g=a(101),E=a(102),y=Object(b.a)({typography:{useNextVariants:!0},palette:{primary:{light:"#99d066",main:"#689f38",dark:"#387002",contrastText:"#000"},secondary:{light:"#819ca9",main:"#546e7a",dark:"#29434e",contrastText:"#fff"}}});var j=function(e){return function(t){return r.a.createElement(g.a,{theme:y},r.a.createElement(E.a,null),r.a.createElement(e,t))}},O=a(13),x=a(111),w=a(105),S=a(49),N=a.n(S),k=a(48),D=a.n(k),F="https://lagerjodel.firebaseio.com/databases/posts",G=F+".json",T={method:"GET",redirect:"follow"},C={"Content-Type":"application/json",Accept:"application/json"},P=Object(m.a)((function(e){return{form:{flexGrow:1},button:{margin:e.spacing(1)},textField:{flexGrow:1,padding:e.spacing(2)}}}))((function(e){var t=e.classes,a=e.user,n=e.onSend,o=r.a.useState(""),i=Object(O.a)(o,2),c=i[0],s=i[1],l=r.a.useState(!1),u=Object(O.a)(l,2),m=u[0],f=u[1],d=r.a.useState("Leere Trompete"),h=Object(O.a)(d,2),v=h[0],b=h[1],g=""!==v,E=function(){if(!g){var e={method:"POST",headers:C,body:JSON.stringify({user:a,text:c,time:Date.now()}),redirect:"follow"};fetch(G,e).then((function(e){e.ok?e.json().then((function(e){f(!0),n()})).catch((function(){b("Fehler beim Verarbeiten der Nachricht...")})):b("Mein Server mag diese Nachricht nicht...")})).catch((function(){b("Fehler beim Senden der Nachricht...")}))}};return r.a.createElement("form",{className:t.form},r.a.createElement(x.a,{id:"my-text",multiline:!0,error:g,className:t.textField,rowsMax:4,fullWidth:!0,value:c,onKeyPress:function(e){"Enter"===e.key&&(E(),e.preventDefault())},onChange:function(e){s(e.target.value),b(e.target.value?"":"Leere Trompete")}}),r.a.createElement(w.a,{variant:"contained",disabled:m||g,onClick:E,className:t.button,color:m?"secondary":"primary",endIcon:m?r.a.createElement(D.a,null):r.a.createElement(N.a,null)},"Send"),m?r.a.createElement(p.a,{variant:"body1",color:"primary"},"Danke!"):"")})),J=a(107),V=a(50),q=a.n(V),M=a(51),A=a.n(M),I=Object(m.a)((function(e){return{root:{marginLeft:"auto"}}}))((function(e){var t=e.id,a=e.post,n=e.user,o=e.classes,i=a.votes,c=i?Object.entries(i).map((function(e){var t=Object(O.a)(e,2);return{id:t[0],data:t[1]}})):void 0,s=c?c.find((function(e){return e.data.user===n})):void 0,l=r.a.useState(s),u=Object(O.a)(l,2),m=u[0],f=u[1],d=F+"/"+t+"/votes",p=function(e){m?function(e){var t=d+"/"+m.id+"/.json",a={method:"PATCH",headers:C,body:JSON.stringify({up:e,time:Date.now()}),redirect:"follow"};fetch(t,a).then((function(e){if(!e.ok)throw new Error("Whoops!");e.json().then((function(e){var t=JSON.parse(JSON.stringify(m));t.data.up=e.up,t.data.time=e.time,f(t)}))})).catch((function(){console.log("Fehler beim Senden des Votes...")}))}(e):function(e){var t=d+".json",a={user:n,up:e,time:Date.now()},r={method:"POST",headers:C,body:JSON.stringify({user:n,up:e,time:Date.now()}),redirect:"follow"};fetch(t,r).then((function(e){if(!e.ok)throw new Error("Whoops!");e.json().then((function(e){f({data:a,id:e.name})}))})).catch((function(){console.log("Fehler beim Senden des Votes...")}))}(e)},h="inherit",v="inherit";return m&&(h=m.data.up?"primary":"inherit",v=m.data.up?"inherit":"primary"),r.a.createElement("div",{className:o.root},r.a.createElement(J.a,{"aria-label":"upvote",size:"small",color:h,onClick:function(e){p(!0)}},r.a.createElement(q.a,null)),r.a.createElement(J.a,{"aria-label":"downvote",size:"small",color:v,onClick:function(e){p(!1)}},r.a.createElement(A.a,null)))})),L=Object(m.a)((function(e){return{root:{flexGrow:1},box:{margin:e.spacing(2),padding:e.spacing(2),display:"flex"}}}))((function(e){var t=e.id,a=e.post,n=e.user,o=e.classes,i=a.text;return r.a.createElement(h.a,{item:!0,xs:12,sm:6,lg:4,className:o.root},r.a.createElement(v.a,{square:!0,elevation:2,className:o.box},r.a.createElement(p.a,{variant:"h6",color:"inherit"},i),r.a.createElement(I,{post:a,id:t,user:n})))})),W=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={data:{},error:""},e}return Object(s.a)(a,[{key:"setData",value:function(e){this.setState({data:e})}},{key:"componentDidMount",value:function(e){this.update()}},{key:"componentDidUpdate",value:function(e){this.props.refresh!==e.refresh&&this.update()}},{key:"update",value:function(){var e=this;fetch(G,T).then((function(e){return e.json()})).then((function(t){e.setData(t)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.classes,o=Object.entries(this.state.data).map((function(t,n){var o=Object(O.a)(t,2),i=o[0],c=o[1];return r.a.createElement(L,{id:i,post:c,user:a,onVote:e.handleVote,key:n})}));return r.a.createElement(h.a,{className:n.root,container:!0,spacing:2},o)}}]),a}(r.a.Component),z=Object(m.a)((function(e){return{root:{flexGrow:1}}}))(W),B=function(){return r.a.createElement("span",{role:"img","aria-label":"trompete",style:{margin:"1ex"}},"\ud83c\udfba")},H=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={refreshFeed:!1},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(f.a,{position:"static"},r.a.createElement(d.a,null,r.a.createElement(B,null),r.a.createElement(p.a,{variant:"h6",color:"inherit",className:t.flex},"Trompete"))),r.a.createElement(v.a,{square:!0,elevation:4,className:t.ui},r.a.createElement(h.a,{container:!0,spacing:2},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(P,{user:"-M8qkGNG5pSfIyxBcxPP",onSend:function(){e.setState((function(e){return{refreshFeed:!e.refreshFeed}}))}})))),r.a.createElement(h.a,{container:!0,spacing:2,className:t.main},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(z,{user:"-M8qkGNG5pSfIyxBcxPP",refresh:this.state.refreshFeed}))))}}]),a}(n.Component),K=j(Object(m.a)((function(e){return{root:{flexGrow:1},main:{padding:e.spacing(2),margin:e.spacing(1)},ui:{padding:e.spacing(2),margin:e.spacing(1)}}}))(H));i.a.render(r.a.createElement(K,null),document.querySelector("#root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.e8f78572.chunk.js.map