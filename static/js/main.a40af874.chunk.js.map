{"version":3,"sources":["withRoot.jsx","endpoints.jsx","postForm.jsx","utils.jsx","vote.jsx","myAgo.jsx","comments.jsx","post.jsx","orderingForm.jsx","feed.jsx","app.jsx","index.js"],"names":["theme","createMuiTheme","typography","useNextVariants","palette","primary","light","main","dark","contrastText","secondary","withRoot","Component","props","CssBaseline","PostsBase","PostsURL","GetRequestOptions","method","redirect","PostHeaderOptions","PostForm","classes","user","onSend","postid","React","useState","text","setText","done","setDone","error","setError","hasError","handleSend","url","data","Date","now","msg","headers","body","JSON","stringify","fetch","then","response","ok","json","id","wrappedOnSend","name","catch","className","form","TextField","multiline","textField","rowsMax","fullWidth","value","onKeyPress","ev","key","preventDefault","onChange","event","target","Button","variant","disabled","onClick","button","color","endIcon","Typography","withStyles","flexGrow","margin","spacing","padding","defaultProps","comment","VoteSum","votes","Object","entries","map","up","reduce","s","root","paddingLeft","icon","post","parent","flatVotes","undefined","foundVote","find","v","vote","setVote","votesBase","handleVote","cVote","parse","time","Error","console","log","updateVote","initialVote","upcolor","downcolor","voteSum","Box","flexDirection","display","alignItems","IconButton","aria-label","size","fontSize","justifyContent","formatter","buildFormatter","germanStrings","Ago","alignSelf","date","Comment","borderLeft","marginTop","comments","setComments","components","t","Grid","item","sx","CommentHint","num","keys","length","startIcon","box","paddingRight","paddingTop","paddingBottom","showComments","setShowComments","xs","Paper","square","elevation","formControl","minWidth","ordering","orderings","menus","o","i","MenuItem","FormControl","InputLabel","shrink","Select","labelId","found","possibleOrderings","Feed","state","handleOrderChange","setState","this","prevProps","update","refresh","setData","SortedPosts","filter","sort","lhs","rhs","lvotes","container","TrompeteIcon","role","style","App","refreshFeed","AppBar","position","Toolbar","flex","Container","fixed","maxWidth","description","prevState","marginLeft","marginRight","ReactDOM","render","document","querySelector"],"mappings":"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","file":"static/js/main.a40af874.chunk.js","sourcesContent":["import React from 'react';\r\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n\r\n// A theme with custom primary and secondary color.\r\n// It's optional.\r\nconst theme = createMuiTheme({\r\n  typography: {\r\n    useNextVariants: true,\r\n  },\r\n  palette: {\r\n    primary: {\r\n      light: \"#ee5648\",\r\n      main: \"#b51f1f\",\r\n      dark: \"#7e0000\",\r\n      contrastText: '#fff'\r\n    },\r\n    secondary: {\r\n      light: \"#60ad5e\",\r\n      main: \"#2e7d32\",\r\n      dark: \"#005005\",\r\n      contrastText: '#fff'\r\n    },\r\n  },\r\n});\r\n\r\nfunction withRoot(Component) {\r\n  function WithRoot(props) {\r\n    // MuiThemeProvider makes the theme available down the React tree\r\n    // thanks to React context.\r\n    return (\r\n      <MuiThemeProvider theme={theme}>\r\n        {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\r\n        <CssBaseline />\r\n        <Component {...props} />\r\n      </MuiThemeProvider>\r\n    );\r\n  }\r\n\r\n  return WithRoot;\r\n}\r\n\r\nexport default withRoot;\r\n","export const PostsBase = 'https://lagerjodel.firebaseio.com/databases/posts';\r\nexport const PostsURL = PostsBase + '.json';\r\nexport const GetRequestOptions = {\r\n  method: 'GET',\r\n  redirect: 'follow'\r\n};\r\n\r\nexport const PostHeaderOptions = {\r\n  'Content-Type': 'application/json',\r\n  'Accept': 'application/json'\r\n}\r\n","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\n\r\nimport { PostsURL, PostsBase, PostHeaderOptions } from './endpoints';\r\n\r\nconst styles = theme => ({\r\n  form: {\r\n    flexGrow: 1,\r\n  },\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  textField: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(1),\r\n  },\r\n});\r\n\r\nconst PostForm = (props) => {\r\n  const { classes, user, onSend, postid } = props;\r\n  const [text, setText] = React.useState('');\r\n  const [done, setDone] = React.useState(false);\r\n  const [error, setError] = React.useState(\"Leere Trompete\");\r\n  const hasError = error !== \"\"\r\n\r\n  const wrappedOnSend = (id, data) => {\r\n    onSend(id, data);\r\n  };\r\n\r\n  const handleSend = () => {\r\n    if (hasError) return;\r\n    const url = postid ? PostsBase + \"/\" + postid + \"/comments.json\" : PostsURL;\r\n    const data = {\r\n      'user': user,\r\n      'text': text,\r\n      'time': Date.now()\r\n    };\r\n    const msg = {\r\n      method: 'POST',\r\n      headers: PostHeaderOptions,\r\n      body: JSON.stringify(data),\r\n      redirect: 'follow'\r\n    };\r\n    fetch(url, msg)\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          response.json().then((json) => {\r\n            setDone(true);\r\n            setText(\"\");\r\n            wrappedOnSend(json.name, data);\r\n          }).catch(() => {\r\n            setError(\"Fehler beim Verarbeiten der Nachricht...\");\r\n          });\r\n        }\r\n        else {\r\n          setError(\"Mein Server mag diese Nachricht nicht...\");\r\n        }\r\n      })\r\n      // this would recover the error message\r\n      //.then( data => setError(\"sending failed...\" + data.errors[0].msg))\r\n      .catch(() => {\r\n        setError(\"Fehler beim Senden der Nachricht...\");\r\n      });\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    if (done) {\r\n      setDone(false);\r\n    }\r\n    setText(event.target.value);\r\n    setError(event.target.value ? \"\" : \"Leere Trompete\");\r\n  };\r\n\r\n  return <form className={classes.form}>\r\n    <TextField\r\n      id=\"my-text\"\r\n      multiline\r\n      error={hasError}\r\n      className={classes.textField}\r\n      rowsMax={4}\r\n      fullWidth\r\n      value={text}\r\n      onKeyPress={(ev) => {\r\n        if (ev.key === 'Enter') {\r\n          handleSend();\r\n          ev.preventDefault();\r\n        }\r\n      }}\r\n      onChange={handleChange}\r\n    />\r\n    <Button\r\n      variant=\"contained\"\r\n      disabled={done || hasError}\r\n      onClick={handleSend}\r\n      className={classes.button}\r\n      color={done ? \"secondary\" : \"primary\"}\r\n      endIcon={done ? <DoneIcon /> : <SendIcon />}>\r\n      {postid ? \"Antworten\" : \"Trompete!\"}\r\n    </Button>\r\n    {done ? <Typography variant=\"body1\" color=\"primary\">Gesendet!</Typography> : \"\"}\r\n  </form>\r\n};\r\n\r\nexport default withStyles(styles)(PostForm);\r\n\r\nPostForm.defaultProps = {\r\n  comment: false,\r\n}\r\n","export function VoteSum(votes) {\r\n  if (votes) {\r\n    const ups = Object.entries(votes).map(\r\n      ([, v]) => { return v.up });\r\n    return ups.reduce((s, up) => s + (up ? 1 : -1), 0);\r\n  }\r\n  return 0;\r\n}\r\n","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\r\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\r\n\r\nimport { PostsBase, PostHeaderOptions } from './endpoints';\r\nimport { VoteSum } from './utils';\r\n\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(1)\r\n  },\r\n  icon: {\r\n    padding: 0\r\n  },\r\n  votes: {\r\n  }\r\n});\r\n\r\nconst Votes = (props) => {\r\n  const { id, post, user, parent, classes } = props;\r\n  const { votes } = post;\r\n  const flatVotes = votes ? Object.entries(votes).map(\r\n    ([k, v]) => { return { id: k, data: v } }) : undefined;\r\n  const foundVote = flatVotes ? flatVotes.find(v => v.data.user === user) : undefined;\r\n\r\n  const [vote, setVote] = React.useState(foundVote);\r\n\r\n  const votesBase = parent ?\r\n    PostsBase + '/' + parent + '/comments/' + id + '/votes' :\r\n    PostsBase + '/' + id + '/votes';\r\n\r\n\r\n  const initialVote = (data, up) => {\r\n    const url = votesBase + '.json';\r\n    const msg = {\r\n      method: 'POST',\r\n      headers: PostHeaderOptions,\r\n      body: JSON.stringify(data),\r\n      redirect: 'follow'\r\n    };\r\n    fetch(url, msg)\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          response.json().then((json) => {\r\n            setVote({\r\n              data: data,\r\n              id: json.name\r\n            });\r\n          });\r\n        }\r\n        else {\r\n          throw new Error(\"Whoops!\");\r\n        }\r\n      })\r\n      .catch(() => {\r\n        console.log(\"Fehler beim Senden des Votes...\");\r\n      });\r\n  }\r\n\r\n  const updateVote = (data, up) => {\r\n    const url = votesBase + '/' + vote.id + '/.json';\r\n    const msg = {\r\n      method: 'PATCH',\r\n      headers: PostHeaderOptions,\r\n      body: JSON.stringify(data),\r\n      redirect: 'follow'\r\n    };\r\n    fetch(url, msg)\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          // good\r\n        }\r\n        else {\r\n          throw new Error(\"Whoops!\");\r\n        }\r\n      })\r\n      .catch(() => {\r\n        console.log(\"Fehler beim Senden des Votes...\");\r\n      });\r\n  }\r\n\r\n  const handleVote = (up) => {\r\n    if (vote) {\r\n      // if the vote does not have an id yet we just ignore it\r\n      // also we ignore it if the vote has the same up state\r\n      if (vote.id && vote.data.up !== up) {\r\n        const cVote = JSON.parse(JSON.stringify(vote))\r\n        cVote.data.up = up;\r\n        cVote.data.time = Date.now();\r\n        setVote(cVote);\r\n        updateVote(cVote.data, up);\r\n      }\r\n    }\r\n    else {\r\n      const data = {\r\n        'user': user,\r\n        'up': up,\r\n        'time': Date.now()\r\n      }\r\n      setVote({ data: data });\r\n      initialVote(data, up);\r\n    }\r\n  };\r\n\r\n  const handleUpVote = (event) => {\r\n    handleVote(true);\r\n  }\r\n\r\n  const handleDownVote = (event) => {\r\n    handleVote(false);\r\n  }\r\n  let upcolor = \"inherit\";\r\n  let downcolor = \"inherit\";\r\n  let voteSum = VoteSum(votes);\r\n  if (vote) {\r\n    const { up } = vote.data;\r\n    upcolor = up ? \"secondary\" : \"inherit\";\r\n    downcolor = !up ? \"primary\" : \"inherit\";\r\n    // correct the voting by the local state\r\n    if (foundVote) {\r\n      if (foundVote.data.up !== up) {\r\n        voteSum += up ? 2 : -2;\r\n      }\r\n    }\r\n    else {\r\n      voteSum += up ? 1 : -1;\r\n    }\r\n  }\r\n\r\n  return <Box\r\n    flexDirection=\"column\"\r\n    display=\"flex\"\r\n    alignItems=\"center\"\r\n    className={classes.root}>\r\n    <Typography variant=\"caption\" className={classes.votes}>\r\n      <IconButton\r\n        className={classes.icon}\r\n        aria-label=\"upvote\"\r\n        size=\"small\"\r\n        color={upcolor}\r\n        onClick={handleUpVote}>\r\n        <KeyboardArrowUpIcon fontSize=\"inherit\" />\r\n      </IconButton>\r\n      <Box\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        className={classes.icon}>\r\n        {voteSum}\r\n      </Box>\r\n      <IconButton\r\n        className={classes.icon}\r\n        aria-label=\"downvote\"\r\n        size=\"small\"\r\n        color={downcolor}\r\n        onClick={handleDownVote}>\r\n        <KeyboardArrowDownIcon fontSize=\"inherit\" />\r\n      </IconButton>\r\n    </Typography>\r\n  </Box>\r\n};\r\n\r\nexport default withStyles(styles)(Votes);\r\n\r\n\r\n","\r\nimport React from 'react';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport TimeAgo from 'react-timeago'\r\nimport germanStrings from 'react-timeago/lib/language-strings/de'\r\nimport buildFormatter from 'react-timeago/lib/formatters/buildFormatter'\r\n\r\nconst formatter = buildFormatter(germanStrings);\r\n\r\nconst Ago = ({ time }) => {\r\n  return <Box alignSelf=\"flex-end\">\r\n    <Typography variant=\"caption\" color=\"inherit\">\r\n      <TimeAgo date={time} formatter={formatter} />\r\n    </Typography>\r\n  </Box>\r\n}\r\n\r\nexport default Ago;\r\n\r\n\r\n","\r\nimport React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Box from '@material-ui/core/Box';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport Vote from './vote';\r\nimport Ago from './myAgo';\r\nimport PostForm from './postForm';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  comment: {\r\n    borderLeft: 'solid black 1px',\r\n    paddingLeft: theme.spacing(1),\r\n    marginTop: theme.spacing(1),\r\n  }\r\n});\r\n\r\nconst Comment = ({ comment, user, postid, classes }) => {\r\n\r\n  const { text, time } = comment.data;\r\n  return <Box display=\"flex\" className={classes.comment}>\r\n    <Box flexGrow={1} >\r\n      <Ago time={time} />\r\n      <Typography variant=\"body1\" color=\"inherit\">\r\n        {text}\r\n      </Typography>\r\n    </Box>\r\n    <Box>\r\n      <Vote post={comment.data} id={comment.id} parent={postid} user={user} />\r\n    </Box>\r\n  </Box>\r\n}\r\n\r\nconst Comments = (props) => {\r\n  const { user, post, postid, classes } = props;\r\n  const [comments, setComments] = React.useState(post.comments);\r\n\r\n  const flatComments = comments ? Object.entries(comments).map(\r\n    ([k, v]) => { return { id: k, data: v } }) : [];\r\n  const components = flatComments.map(t => <Comment key={t.id} comment={t} user={user} postid={postid} classes={classes} />);\r\n  const handleSend = (id, comment) => {\r\n    setComments({\r\n      ...comments,\r\n      [id]: comment\r\n    });\r\n  }\r\n\r\n  return <Grid item sx={12} className={classes.root}>\r\n    <PostForm user={user} postid={postid} onSend={handleSend} />\r\n    {components}\r\n  </Grid>\r\n}\r\n\r\nexport default withStyles(styles)(Comments);\r\n\r\n","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Box from '@material-ui/core/Box';\r\nimport CommentIcon from '@material-ui/icons/Comment';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport Vote from './vote';\r\nimport Ago from './myAgo';\r\nimport Comments from './comments';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  box: {\r\n    margin: theme.spacing(1),\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(2),\r\n    paddingTop: theme.spacing(2),\r\n    paddingBottom: theme.spacing(1),\r\n  },\r\n  comment: {\r\n    margin: theme.spacing(0),\r\n    padding: theme.spacing(0)\r\n  }\r\n});\r\n\r\nconst CommentHint = ({ comments, classes, onClick }) => {\r\n  const num = comments ? Object.keys(comments).length : 0;\r\n  return <Box flexGrow={1} >\r\n    <Button\r\n      className={classes.comment}\r\n      variant=\"text\"\r\n      size=\"small\"\r\n      color=\"secondary\"\r\n      onClick={onClick}\r\n      startIcon={<CommentIcon />}\r\n    ><Typography variant=\"caption\" color=\"inherit\">\r\n        {num === 1 ? num + \" Kommentar\" : num + \" Kommentare\"}\r\n      </Typography>\r\n    </Button>\r\n  </Box>\r\n}\r\n\r\nconst Post = (props) => {\r\n  const { id, post, user, classes } = props;\r\n  const { text, time, comments } = post;\r\n\r\n  const [showComments, setShowComments] = React.useState(false);\r\n\r\n  const handleShowComments = (event) => setShowComments(!showComments);\r\n\r\n  return <Grid item xs={12} className={classes.root}>\r\n    <Paper square elevation={2} className={classes.box}>\r\n      <Box display=\"flex\" >\r\n        <Box flexGrow={1} >\r\n          <Typography variant=\"h6\" color=\"inherit\">\r\n            {text}\r\n          </Typography>\r\n        </Box>\r\n        <Box>\r\n          <Vote post={post} id={id} user={user} />\r\n        </Box>\r\n      </Box>\r\n      <Box display=\"flex\" >\r\n        <CommentHint comments={comments} classes={classes} onClick={handleShowComments} />\r\n        <Ago time={time} />\r\n      </Box>\r\n      {showComments ? <Comments post={post} postid={id} user={user} /> : \"\"}\r\n    </Paper>\r\n  </Grid>\r\n};\r\n\r\nexport default withStyles(styles)(Post);\r\n\r\n","\r\nimport React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\n\r\n\r\nconst styles = theme => ({\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  }\r\n});\r\n\r\nconst OrderingForm = (props) => {\r\n  const { classes, onChange, ordering, orderings } = props;\r\n  const { value } = ordering;\r\n\r\n  const menus = orderings.map((o, i) => {\r\n    return <MenuItem value={o.value} key={i}>{o.name}</MenuItem>\r\n  });\r\n\r\n  const handleChange = (event) => {\r\n    const { value } = event.target;\r\n    const found = orderings.find(o => value === o.value);\r\n    if (found)\r\n      onChange(found);\r\n  };\r\n\r\n  return <FormControl className={classes.formControl}>\r\n    <InputLabel shrink id=\"ordering-label\">\r\n      sortieren nach\r\n    </InputLabel>\r\n    <Select\r\n      labelId=\"demo-simple-select-placeholder-label-label\"\r\n      id=\"demo-simple-select-placeholder-label\"\r\n      value={value}\r\n      onChange={handleChange}\r\n    >\r\n      {menus}\r\n    </Select>\r\n  </FormControl>\r\n};\r\n\r\nexport default withStyles(styles)(OrderingForm);\r\n","import React from 'react';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport Post from './post';\r\nimport OrderingForm from './orderingForm';\r\nimport { PostsURL, GetRequestOptions } from './endpoints';\r\nimport { VoteSum } from './utils';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n});\r\n\r\nconst possibleOrderings = [\r\n  { name: \"Neueste\", value: \"newest\" },\r\n  { name: \"Hottest\", value: \"hottest\" },\r\n]\r\n\r\nclass Feed extends React.Component {\r\n  state = {\r\n    data: {},\r\n    error: \"\",\r\n    ordering: possibleOrderings[0]\r\n  }\r\n\r\n  setData(data) {\r\n    this.setState({ data: data });\r\n  }\r\n\r\n  componentDidMount(prevProps) {\r\n    this.update()\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.refresh !== prevProps.refresh) {\r\n      this.update()\r\n    }\r\n  }\r\n\r\n  handleOrderChange = (ordering) => {\r\n    this.setState({ ordering: ordering });\r\n  }\r\n\r\n  update() {\r\n    // const { user } = this.props;\r\n    fetch(PostsURL, GetRequestOptions).then(response => response.json())\r\n      .then(json => {\r\n        this.setData(json);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { user, classes } = this.props;\r\n    const { data, ordering } = this.state;\r\n    const { value } = ordering;\r\n    const SortedPosts = Object.entries(data).map(([k, v]) => {\r\n      return { id: k, data: v };\r\n    })\r\n      .filter((post => post.data.comment !== true))\r\n      .sort((lhs, rhs) => {\r\n        if (value === \"newest\") {\r\n          return rhs.data.time - lhs.data.time;\r\n        }\r\n        else if (value === \"hottest\") {\r\n          const lvotes = VoteSum(lhs.data.votes);\r\n          const rvotes = VoteSum(rhs.data.votes);\r\n          const score = rvotes - lvotes;\r\n          return score;\r\n        }\r\n        else {\r\n          return 0;\r\n        }\r\n      })\r\n      .map((post, i) => {\r\n        return <Post id={post.id} post={post.data} user={user} key={post.id} />\r\n      });\r\n\r\n    return <Grid className={classes.root} container spacing={1}>\r\n      <Grid item xs={12}>\r\n        <OrderingForm ordering={ordering} orderings={possibleOrderings} onChange={this.handleOrderChange} />\r\n      </Grid>\r\n      {SortedPosts}\r\n    </Grid>\r\n  }\r\n};\r\n\r\nexport default withStyles(styles)(Feed);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport withRoot from './withRoot';\r\nimport PostForm from './postForm';\r\nimport Feed from './feed';\r\n\r\nconst styles = theme => ({\r\n  flex: {\r\n    flexGrow: 1,\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  main: {\r\n    padding: theme.spacing(2),\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto',\r\n  },\r\n  description: {\r\n    padding: theme.spacing(2),\r\n  }\r\n});\r\n\r\nconst TrompeteIcon = () => { return <span role=\"img\" aria-label=\"trompete\" style={{ margin: \"1ex\" }}>🎺</span>; };\r\n\r\nconst user = '-M8qkGNG5pSfIyxBcxPP';\r\n\r\nclass App extends Component {\r\n\r\n  state = {\r\n    refreshFeed: false\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    const handleSend = (id, data) => { this.setState(prevState => { return { refreshFeed: !prevState.refreshFeed } }); };\r\n\r\n    return <div className={classes.root}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <TrompeteIcon />\r\n          <Typography variant=\"h5\" className={classes.flex}>\r\n            Trompete\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Container spacing={2} fixed={true} maxWidth={1200} className={classes.main}>\r\n        <Paper square elevation={4} >\r\n          <Typography variant=\"body1\" className={classes.description}>\r\n            Trompete eine Nachricht an alle Pfadfinder!\r\n          </Typography>\r\n          <PostForm user={user} onSend={handleSend} />\r\n        </Paper>\r\n        <Feed user={user} refresh={this.state.refreshFeed} />\r\n      </Container>\r\n    </div >\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withRoot(withStyles(styles)(App));\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './app.jsx';\r\n\r\nReactDOM.render(<App />, document.querySelector('#root'));\r\n"],"sourceRoot":""}